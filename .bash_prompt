
function __git_dirty {
  git diff --quiet HEAD &>/dev/null
  [ $? == 1 ] && echo "!"
}

function __git_prompt {
  local branch=$(__git_ps1 "%s")
  local dirty=$(__git_dirty)
  local full="$branch$dirty"
  [ "$full" != "" ] && echo "($full)"
}

function __rvm_ps1 {
  printf "%s:" "$(rvm-prompt i g)"
}

# <ruby>@<gemset>:<dir>(<git repo>)
export PS1='\[\e[36m\]\[\e[0m\]\[\e[33m\]$(__rvm_ps1)\[\e[0m\]\w\[\e[35m\]$(__git_prompt)\[\e[0m\]$ '
export PS2='> '    # Secondary prompt
export PS3='#? '   # Prompt 3
export PS4='+'     # Prompt 4
